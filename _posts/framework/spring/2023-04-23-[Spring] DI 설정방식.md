---
layout: single
title: "π“[Spring] DI μ„¤μ •λ°©μ‹μ— λ€ν•΄μ„..."
toc: true
toc_sticky: true
toc_label: "λ©μ°¨"
categories: spring
excerpt: ""
tag: [java, di]
---

# DIλ€?
`DI` λ” Dependency Injectionμ μ•½μλ΅, `μμ΅΄κ΄€κ³„ μ£Όμ…`μ„ μλ―Έν•λ‹¤.  
μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν•¨μΌλ΅μ¨ κ°μ²΄κ°„μ μμ΅΄κ΄€κ³„λ¥Ό μƒμ„±ν•λ‹¤.  
μ΄ λ•, μ¤ν”„λ§μ€ λ°νƒ€μ„ μ‹μ— μ‚¬μ©ν•  κ°μ²΄λ“¤μ μμ΅΄κ΄€κ³„λ¥Ό λ¶€μ—¬ν•μ—¬ `κ°μ²΄ κ°„μ κ²°ν•©λ„λ¥Ό λ‚®μ¶λ‹¤.`  


# DI μ„¤μ • λ°©μ‹
DIλ¥Ό μ„¤μ •ν•λ” λ°©μ‹μ€ XML, JAVA, μ• λ…Έν…μ΄μ… μ„¤μ •λ°©μ‹μΌλ΅ 3κ°€μ§€ λ°©μ‹μ΄ μλ‹¤.  
μ΄κ±΄ DIλ¥Ό μ„¤μ •ν•λ” λ°©μ‹μ΄κ³ , DIλ¥Ό ν•λ” λ°©μ‹(μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν•λ” λ°©μ‹)μ—λ” `μƒμ„±μ κΈ°λ° μ£Όμ…`κ³Ό `μ„¤μ •μ κΈ°λ° μ£Όμ…`μ 2κ°€μ§€ λ°©μ‹μ΄ μ΅΄μ¬ν•λ‹¤.  

## XML μ„¤μ • λ°©μ‹
κ°€μ¥ μ „ν†µμ μΈ DI μ„¤μ • λ°©μ‹μΌλ΅, XMLνμΌμ„ ν†µν•΄ λΉμ„ μ •μν•κ³ , μμ΅΄κ΄€κ³„λ¥Ό μ„¤μ •ν•λ‹¤.  
<br>

[μμ‹]  
```
<bean id="myBean" class="com.example.MyBean">
    <constructor-arg ref="myDependency"/>
</bean>
<bean id="myDependency" class="com.example.MyDependency"/>
```

## JAVA κΈ°λ° μ„¤μ • λ°©μ‹
XML μ„¤μ • μ½”λ“λ¥Ό Java μ½”λ“λ΅ λ€μ²΄ν•λ” λ°©μ‹μ΄λ‹¤.  
`@Configuration` μ• λ…Έν…μ΄μ…μΌλ΅ μ„¤μ • ν΄λμ¤λ¥Ό μ§€μ •ν•κ³ , `@Bean` μ• λ…Έν…μ΄μ…μΌλ΅ λΉμ„ μ •μ λ° μμ΅΄κ΄€κ³„λ¥Ό μ„¤μ •ν•λ‹¤.  
<br>

[μμ‹]  
```
@Configuration
public class MyConfiguration {
  @Bean
  public MyBean myBean(MyDependency myDependency) {
    return new MyBean(myDependency);
  }
  
  @Bean
  public MyDependency myDependency() {
    return new MyDependency();
  }
}
```

## μ• λ…Έν…μ΄μ… λ°©μ‹
μ• λ…Έν…μ΄μ… λ°©μ‹μ€ μ• λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν•λ” λ°©μ‹μ΄λ‹¤.  
μ΄ λ•λ” `<context:component-scan>` νƒκ·Έλ¥Ό μ΄μ©ν•λ‹¤.  
<br>

[ApplicationContext.xml]  
```
<beans xmlns="~">
...
    <context:component-scan base-package="com.example.MyBean">
    </context:component-scan>
</beans>
```

## XML μ„¤μ •κ³Ό JAVA μ„¤μ •μ„ λ€μΉν•΄λ³΄μ.
μμ΅΄κ΄€κ³„ μ£Όμ…μ—λ” `μƒμ„±μ κΈ°λ° μ£Όμ… λ°©μ‹`κ³Ό `μ„¤μ •μ κΈ°λ° μ£Όμ… λ°©μ‹`μ 2κ°€μ§€ λ°©μ‹μ΄ μλ‹¤.  

### μƒμ„±μ κΈ°λ° μ£Όμ…  
[applicationContext.xml]  
```
<bean id="memberDAO" class="org.korea.di.persistence.MemberDAOImpl"></bean>
<bean id="memberService" class="org.korea.di.service.MemberServiceImpl"></bean>
    <constructor-arg ref="memberDAO">
</bean>
```  
- λΉμ€ ν•΄λ‹Ή μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄μ—μ„ κ°€μ Έμ΄(MemberDAOκ°€ μ•„λ‹ MemberDAOImpl)  
- μƒμ„±μ κΈ°λ° μ£Όμ…μ€ `<consturctor-arg ref="memberDAO"/>`μ™€ κ°™μ΄ `<constructor-arg/>`νƒκ·Έκ°€ μ‚¬μ©λλ‹¤.  
<br>

[MemberServiceImpl.java]  
```
public class MemberServiceImpl implements MemberService {
    private MemberDAO memberDAO;
    // μƒμ„±μ μ •μ
    public MemberServiceImpl(MemberDAO memberDAO) {
        this.memberDAO = memberDAO;
    }
    ...
}
```

### μ„¤μ •μ(setter) κΈ°λ° μ£Όμ…  
[applicationContext.xml]  
```
<bean id="memberDAO" class="org.tukorea.di.persistence.MemberDAOImpl"></bean>
<bean id="memberService" class="org.tukorea.di.service.MemberServiceImpl">
    <property name="memberDAO" ref="memberDAO"/>
</bean>
```  
- μ„¤μ •μ κΈ°λ° μ£Όμ…μ€ `<property name="memberDAO" ref="memberDAO"/>`μ™€ κ°™μ΄ `<property>`νƒκ·Έμ™€ `name` μ†μ„±μ΄ μ‚¬μ©λλ‹¤.  
<br>

[MemberService.java]  
```
public class MemberServiceImpl implements MemberService {
    private MemberDAO memberDAO;
    // μ„¤μ •μ μ •μ
    public setMemberDAO(MemberDAO memberDAO) {
        this.memberDAO = memberDAO;
    }
    ...
}
```  
