---
layout: single
title: "ğŸ“˜[DRF] ì‹œë¦¬ì–¼ë¼ì´ì € ìœ íš¨ì„± ê²€ì‚¬(is_valid())?"
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"
categories: django
excerpt: ""
tag: [python, drf]
---

# ìœ íš¨ì„± ê²€ì‚¬ - Validation?
`ìœ íš¨ì„± ê²€ì‚¬(Validation)`ë€, ì‚¬ìš©ìë¡œë¶€í„° ë°›ì€ ë°ì´í„°ê°€ ì‹¤ì œ ìœ íš¨í•œ ê°’ì¸ì§€ ì•„ë‹Œì§€ë¥¼ íŒë‹¨í•˜ëŠ” ê³¼ì •ì´ë‹¤.  
ì˜ˆì‹œë¡œ `ë¡œê·¸ì¸` ìƒí™©ì„ ë“¤ ìˆ˜ ìˆë‹¤.  

ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í¼ì— ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´, ê·¸ ê°’ë“¤ì´ ì„œë²„ë¡œ ë„˜ì–´ì˜¬ ê²ƒì´ë‹¤.  
ê·¸ ë•Œ, ì•„ì´ë”” í˜¹ì€ ë¹„ë°€ë²ˆí˜¸ê°€ ì‹¤ì œ íšŒì› DBì— ì¡´ì¬í•˜ëŠ” ê°’ì¸ì§€, ì¤‘ë³µëœ ê°’ì€ ì•„ë‹Œì§€ ë“±ì„ íŒë‹¨í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•  ê²ƒì´ë‹¤.  

`DRF(Django Rest Framework)`ì—ì„œëŠ” ì‚¬ìš©ìë¡œë¶€í„° ë°›ì€ ê°’ì„ `ì‹œë¦¬ì–¼ë¼ì´ì €(Serializer)`ë¥¼ í†µí•´ ì§ë ¬í™” ê³¼ì •ì„ ê±°ì¹œë‹¤.  
ì´ í›„, ì§ë ¬í™” í•œ ê°’ì„ ê°–ê³  ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ë§ˆì¹œ í›„ì— ë‚˜ë¨¸ì§€ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.  

DRFì—ì„œëŠ” `is_valid()` ë©”ì„œë“œë¥¼ í†µí•´ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤.  

## serializer.is_valid()?

`is.valid()`ëŠ” ì‹œë¦¬ì–¼ë¼ì´ì €ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë°›ì€ í›„, ê·¸ ê°’ì´ `ìœ íš¨í•œ ê°’ì¸ì§€ íŒë‹¨`í•˜ëŠ” ë©”ì„œë“œì´ë‹¤.

is_valid()ë©”ì„œë“œì—ëŠ” `raise_exception=True` í˜¹ì€ `raise_exception=False` ì˜ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ëŠ” is_valid()ê°€ êµ¬í˜„ë˜ì–´ìˆëŠ” `restframework.serializers.py`ì˜ ì¼ë¶€ì´ë‹¤.

```python
class BaseSerializer(Field):
		...
		
		def is_valid(self, *, raise_exception=False):
        assert hasattr(self, 'initial_data'), (
            'Cannot call `.is_valid()` as no `data=` keyword argument was '
            'passed when instantiating the serializer instance.'
        )

        if not hasattr(self, '_validated_data'):
            try:
                self._validated_data = self.run_validation(self.initial_data)
            except ValidationError as exc:
                self._validated_data = {}
                self._errors = exc.detail
            else:
                self._errors = {}

        if self._errors and raise_exception:
            raise ValidationError(self.errors)

        return not bool(self._errors)
    
		  ...
```

ì´ ì½”ë“œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ `raise_exception` ì˜µì…˜ì€ Falseê°€ ê¸°ë³¸ê°’ì´ë‹¤.

`raise_exception` ì˜µì…˜ì€ ë­˜ê¹Œ?

### raise_exception ì˜µì…˜

ì´ ì˜µì…˜ì€ `is_valid()` ë¥¼ ìˆ˜í–‰í•  ë•Œ, ê°’ì´ ìœ íš¨í•œ ê°’ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì˜µì…˜ì´ë‹¤.

ë§Œì•½ `raise_exception=True` ë¡œ ì„¤ì •í–ˆëŠ”ë°, `is_valid()` ì¤‘ ê°’ ì²´í¬ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ `ValidationError` ë¥¼ raiseí•˜ê²Œ ëœë‹¤.

ë³´í†µì˜ ê²½ìš°ì—ëŠ” viewì—ì„œ ì¤‘ê°„ì— exceptionì´ raiseë  ê²½ìš°, 500 ì„œë²„ ì—ëŸ¬ë¥¼ ë¦¬í„´í•œë‹¤.

í•˜ì§€ë§Œ, ì˜µì…˜ì„ Trueë¡œ ì„¤ì •í•œ ìƒíƒœì—ì„œ ValidationErrorê°€ raiseë˜ëŠ” ê²½ìš°ì—ëŠ” DRFì—ì„œ exception í•¸ë“¤ëŸ¬ì— ì˜í•´ 400 ì½”ë“œë¥¼ ë¦¬í„´í•˜ê²Œ ëœë‹¤.

# ì°¸ê³  ìë£Œ

[[í•´ì„¤ê³¼ í•¨ê»˜ ì½ëŠ” DRF ë¬¸ì„œ] Validation - Raising an exception on invalid data](https://hoorooroob.tistory.com/entry/DRF-Validation-Raising-an-exception-on-invalid-data)