---
layout: single
title: "ğŸ“˜[Django] ë¹„ë°€ë²ˆí˜¸ í•´ì‹± í•¨ìˆ˜?"
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"
categories: django
excerpt: ""
tag: [python]
---

# Djangoì—ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™” í•´ì£¼ëŠ” ë‚´ì¥ í•¨ìˆ˜ê°€ ìˆë‹¤!

ìš°ì„  ë‚´ê°€ ì‚¬ìš© ê²½í—˜ì´ ìˆëŠ” `make_password()` ì— ëŒ€í•´ ì •ë¦¬í•œë‹¤!

`make_password()` ëŠ” djangoì—ì„œ ì œê³µí•˜ëŠ” ë‚´ì¥ í•¨ìˆ˜ë¡œ, djangoì—ì„œ ì§€ì›í•˜ëŠ” í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì„œ ë¬¸ìì—´ì„ ì•”í˜¸í™” í•˜ëŠ” í•¨ìˆ˜ë‹¤.

`from django.contrib.auth.hashers import make_password` ì„ ì„ ì–¸ í›„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```python
from django.contrib.auth.hashers import make_password

hashed_password = make_password(password)
```

ì´ëŸ° ì‹ìœ¼ë¡œ `password` ë¼ëŠ” ë¬¸ìì—´ì„ `make_password()` ì— ì „ë‹¬í•˜ë©´ ì•”í˜¸í™”ëœ ë¬¸ìì—´ë¡œ ë³€í™˜ë˜ì–´ `hashed_password` ì— ì €ì¥ëœë‹¤.

## make_password() ì½”ë“œ

```python
def make_password(password, salt=None, hasher="default"):
    """
    Turn a plain-text password into a hash for database storage

    Same as encode() but generate a new random salt. If password is None then
    return a concatenation of UNUSABLE_PASSWORD_PREFIX and a random string,
    which disallows logins. Additional random string reduces chances of gaining
    access to staff or superuser accounts. See ticket #20079 for more info.
    """
    if password is None:
        return UNUSABLE_PASSWORD_PREFIX + get_random_string(
            UNUSABLE_PASSWORD_SUFFIX_LENGTH
        )
    if not isinstance(password, (bytes, str)):
        raise TypeError(
            "Password must be a string or bytes, got %s." % type(password).__qualname__
        )
    hasher = get_hasher(hasher)
    salt = salt or hasher.salt()
    return hasher.encode(password, salt)
```

ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™” í•˜ë©´, ë¡œê·¸ì¸ì„ í•  ë•Œ, ì–´ë–»ê²Œ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í• ê¹Œ?

ì´ê±´ `check_password()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤!

ì´ ë©”ì„œë“œ ë˜í•œ `from django.contrib.auth.hashers import check_password` ë¥¼ ì„ ì–¸  í›„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤!

## make_password()ëŠ” ì–´ë–¤ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í• ê¹Œ?

ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ ê¸‰í•œëŒ€ë¡œ `make_password()` ë¥¼ ì‚¬ìš©í–ˆëŠ”ë°, ìµœê·¼ì— ì´ ë©”ì„œë“œëŠ” ì–´ë–¤ í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í• ê¹Œ?ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

ì–´ë–¤ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ”ì§€ëŠ” [djangoì˜ ê³µì‹ ë¬¸ì„œ](https://docs.djangoproject.com/en/5.0/topics/auth/passwords/#django.contrib.auth.hashers.make_password)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

[ê³µì‹ ë¬¸ì„œ ë°œì·Œ]

```
[ì˜ì–´]
make_password(password, salt=None, hasher='default')Â¶

Creates a hashed password in the format used by this application. 
It takes one mandatory argument: the password in plain-text (string or bytes). 
Optionally, you can provide a salt and a hashing algorithm to use, if you donâ€™t want to use the defaults (first entry of PASSWORD_HASHERS setting). 
See **Included hashers** for the algorithm name of each hasher. 
If the password argument is None, an unusable password is returned (one that will never be accepted by check_password()).

[í•œêµ­ì–´]
make_password( ë¹„ë°€ë²ˆí˜¸ , ì†Œê¸ˆ = ì—†ìŒ , í•´ì‹œ = 'ê¸°ë³¸ê°’' ) Â¶

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. 
í•˜ë‚˜ì˜ í•„ìˆ˜ ì¸ìˆ˜, ì¦‰ ì¼ë°˜ í…ìŠ¤íŠ¸(ë¬¸ìì—´ ë˜ëŠ” ë°”ì´íŠ¸)ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 
ì„ íƒì ìœ¼ë¡œ ê¸°ë³¸ê°’(PASSWORD_HASHERS ì„¤ì •ì˜ ì²« ë²ˆì§¸ í•­ëª©) ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ëŠ” ê²½ìš° ì‚¬ìš©í•  ì†”íŠ¸ ë° í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ê° í•´ì‹œì˜ ì•Œê³ ë¦¬ì¦˜ ì´ë¦„ì€ **í¬í•¨ëœ í•´ì‹œ**ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”. 
ë¹„ë°€ë²ˆí˜¸ ì¸ìˆ˜ê°€ ì´ë©´ Noneì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë°˜í™˜ë©ë‹ˆë‹¤( ì—ì„œëŠ” ì ˆëŒ€ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë¹„ë°€ë²ˆí˜¸ check_password()).
```

ì—¬ê¸°ì„œ `Included hashers` ëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.

```
The corresponding algorithm names are:
- pbkdf2_sha256
- pbkdf2_sha1
- argon2
- bcrypt_sha256
- bcrypt
- scrypt
- md5
```

ì´ ì¤‘ `default` ì•Œê³ ë¦¬ì¦˜ì€ `pbkdf2_sha256` ì•Œê³ ë¦¬ì¦˜ì´ë‹¤!

ì¦‰, `make_password()` ëŠ” `pbkdf2_sha256` ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤!

## pbkdf2_sha256 ì•Œê³ ë¦¬ì¦˜?

ìš°ì„  `pbkdf2` ë€, `Password-Based Key Derivation Function Version 2` ì˜ ì•½ìë‹¤.

> **ì‚¬ìš©ìì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í‚¤(key)ë¥¼ ìœ ë„í•˜ê¸° ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ â†’ ë¯¸êµ­ì˜ NISTì—ì„œ ê¶Œì¥í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë¼ê³  í•œë‹¤.**
> 

ì´ëŠ” ì‚¬ìš©ìì˜ íŒ¨ìŠ¤ì›Œë“œì— `í•´ì‹œí•¨ìˆ˜`, `Salt`, `ë°˜ë³µíšŸìˆ˜(iteration)` ë“±ì„ ì§€ì •í•˜ì—¬ íŒ¨ìŠ¤ì›Œë“œì— ëŒ€í•œ `ë‹¤ì´ì œìŠ¤íŠ¸(Digest)` ë¥¼ ìƒì„±í•œë‹¤.

- ë‹¤ì´ì œìŠ¤íŠ¸(Digest): ì „ì²´ ë©”ì‹œì§€ë¥¼ í•´ì‹œí•¨ìˆ˜ì— ë„£ì–´ ì—°ì‚° í›„ ìƒì„±ëœ ì‘ì€ ê°’
    - ê³„ì‚°ì´ ë¹ ë¦„
    - ë¹„ê°€ì—­ì : â€œë˜ëŒë¦´ ìˆ˜ ì—†ëŠ”â€
    - ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥

# ì°¸ê³ ìë£Œ

[Password management in Django | Django documentation](https://docs.djangoproject.com/en/5.0/topics/auth/passwords/#django.contrib.auth.hashers.make_password)

[make_password() github ì†ŒìŠ¤ì½”ë“œ](https://github.com/django/django/blob/main/django/contrib/auth/hashers.py#L64)

[ITë³´ì•ˆ - PBKDF2 ì•Œê³ ë¦¬ì¦˜ ì´ë€ ë¬´ì—‡ì¸ê°€](https://m.blog.naver.com/on21life/221534664259)

[ITë³´ì•ˆ - digest, ë‹¤ì´ì œìŠ¤íŠ¸ ë€ ë¬´ì—‡ì¸ê°€](https://blog.naver.com/PostView.nhn?blogId=on21life&logNo=221971009391)